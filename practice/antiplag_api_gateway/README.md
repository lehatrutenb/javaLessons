Имеется 3 сервиса: antiplag_api_gateway,antiplag_file_storing_service,antiplag_file_analysis_service
routing между ними ищите в docker-compose и application.yml файлах, но он вроде бы адекватно вынесен в переменные окружения (без надежды на масштабирование)



antiplagapigateway имеет http controllers c swagger-ом
общение между сервисами происходит через grpc
поднятие сервисов через 3 docker compose



antiplagFileStoring имеет postgres чтобы хранить файлы и их мета информацию (тк хранить где-то в системе совсем не курто - а тут если нам что-то не понравится, то не сложно заменить на другую имлементацию интерфейса)



antiplagFile имеет postgres внутри чтобы помнить результаты, а также redis чтобы кешировать возврат отчёта о билжайших файлах



Внутри старался поддерживать чистую архитектуру с примесью DDD



Сама проверка на антиплагиат ничего интересного не несёт - всё-таки решил упростить до простого полного совпадения файлов



Не особо сильно задумывался об обработке падения других сервисов - grpc сам начинает retry-ить попытки подключится - лишь минимальную обёртку над этим добавил,  чтобы не пятисотить



Так же добавил параметр forceRecalc для подсчёта близости файлов - чтобы для существующего давно файла можно было бы несколько раз пересчитывать - всё резлуьтаты сохраняются в БД с разныь timestamp , в cache-е остаются только самые новые - другие отмирают по ttl



я понимаю  что api gateway можно было бы реализовать 1001 способ меньше и удобнее , но захотелось вот так потренирвоаться



запускайте в debug режиме чтобы понимать происходить ли кешериование или нет - внутри есть совсем немного логирования происходящего



makefile нужны мне для запуска без контейнеризации - в целом особо смысла внутри них нет



Сервисы структрурированны немного по-разному с целью поискать как можно было бы реализовать , чтобы посмотреть какие идеи +- адекватные, какие похуже
